apply plugin: 'konan'

konanArtifacts {
    library("kodein-erased-${project.version}", targets: konanTargets) {
        enableMultiplatform true

        libraries {
            allLibrariesFrom project(':core:kodein-core-native')
        }
    }

    program("tests") {
        commonSourceSet 'test'
        libraries {
            allLibrariesFrom project(':test-utils:test-utils-native')
            artifact "kodein-erased-${project.version}"
        }
        extraOpts '-tr'
    }
}

dependencies {
    expectedBy project(":erased:kodein-erased-common")
}

task test(dependsOn: run)

ext {
    libName = "kodein-erased-${project.version}"
    pom_name = "Kodein-Erased-Native"
    pom_description = "KOtlin DEpendency INjection using erased types by default for Native Platforms (Native Platforms do NOT support genericity)"
}
apply from: "../../gradle/klib-universal.gradle"
apply from: "../../gradle/klib-upload.gradle"
